FCLOSE(3) Linux 程序员手册 FCLOSE(3)

姓名
fclose - 关闭流

概要
#include <stdio.h>

int fclose(FILE *流);

描述
fclose() 函数刷新流指向的流（写入任何缓冲的
使用 fflush(3)) 输出数据并关闭底层文件描述符。

如果流参数非法，则 fclose() 的行为未定义
指针，或者是已传递给先前调用 fclose() 的描述符。

返回值
成功完成后，返回 0。否则，返回 EOF 并返回 errno
设置以指示错误。在任何一种情况下，任何进一步的访问（包括另一个
对流调用 fclose()) 会导致未定义的行为。

错误
EBADF 流下的文件描述符无效。

fclose() 函数也可能会失败并为任何指定的错误设置 errno
对于例程 close(2)、write(2) 或 fflush(3)。

属性
有关本节中使用的术语的解释，请参阅 attribute(7)。

┌──────────┬──────────────┬──────────┐
│接口 │属性 │值 │
├──────────┼────────────────┼──────────┤
│fclose() │ 线程安全 │ MT-Safe │
└──────────┴────────────────┴──────────┘
符合
POSIX.1-2001、POSIX.1-2008、C89、C99。

笔记
请注意，fclose() 仅刷新 C 库提供的用户空间缓冲区。
为了确保数据物理存储在磁盘上，内核缓冲区必须
也可以刷新，例如使用sync(2)或fsync(2)。

也可以看看
关闭（2），fcloseall（3），fflush（3），fileno（3），fopen（3），setbuf（3）

版画
本页是 Linux 手册页项目 5.10 版的一部分。的描述
项目、有关报告错误的信息以及此页面的最新版本，
可以在 https://www.kernel.org/doc/man-pages/ 找到。

GNU 2016-12-12 FC关闭(3)
